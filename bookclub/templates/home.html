{% extends 'base_content.html' %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-6">

            </div>
            <div class="col-3">

            </div>

            <div class="col-3">
                <div class="text float-end">

                </div>
            </div>
        </div>
    <div class="row">
        <div class="col-6">

        <h4 style="padding-top: 10px;"><strong>Recommended for {{ request.user.first_name }}</strong></h4>

            <div class="book-table">
    <table class="table table-hover table-borderless text-dark" style="background-color: white;border-style: groove ;border-color: brown">
        <thead>
      <tr>
        <th scope="col">
        <th scope="col">
      </tr>
    </thead>
    <tbody>
      {% for book in recommendations %}
      <tr class="clickable-row" data-href="{% url 'book_profile' book.id %}">
        <td><img src="{{ book.medium_url }}" alt="a"></td>
        <td><strong>{{ book.title }}</strong></td>
      </tr>
      {% endfor %}
    </tbody>
      </table>
        </div>
    </div>

    <div class="col-6">
        <div class="row">

        </div>
        <div class="row">

        </div>
    </div>

    </div>
    </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
  jQuery(document).ready(function($) {
      $(".clickable-row").click(function() {
          window.location = $(this).data("href");
      });
  });
</script>

<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">You must rate 10 books to get better recommendations</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6>
          You have rated 
          {% if request.user.get_number_of_ratings == 0 %}
              no books yet
          {% elif request.user.get_number_of_ratings == 1 %}
              1 book
          {% else %}
              {{request.user.get_number_of_ratings}} books
          {% endif %}
        </h6>
        <form method="GET" action="{% url 'book_list' %}">
          <button class="btn" style="background-color: brown; color: white" type="submit">Click here to rate more books</button>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}

