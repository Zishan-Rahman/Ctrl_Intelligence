{% extends 'base_content.html' %}
{% load bootstrap_pagination %}
{% block content %}
    <div class="container">
    <div class="row">
        <div class="col-12">
   <body>
      {% if not applicants %}
      <h3>You have no pending applications.</h3>
      {% else %}
      <input type='text' id='txt_searchall' placeholder="Search for clubs and applicants.." size="30">&nbsp
      <table id="myTable" class="table">
        <thead class="table-light">
          <tr>
            <th scope="col" style="width:15%">Club Applying To</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Age</th>
            <th scope="col">Date Joined</th>
            <th scope="col" style="width:30%">Bio</th>
            <th scope="col">Favourite Genre</th>
            <th scope="col">Their Location</th>
            <th scope="col">Accept</th>
            <th scope="col">Reject</th>
          </tr>
        </thead>
    {% for a in page_obj %}
      <tr>
        <td>{{ a.club.name }}</td>
        <td>{{ a.applicant.first_name }}</td>
        <td>{{ a.applicant.last_name }}</td>
        <td>{{ a.applicant.age }}</td>
        <td>{{ a.applicant.date_joined }}</td>
        <td>{{ a.applicant.public_bio }}</td>
        <td>{{ a.applicant.favourite_genre }}</td>
        <td>{{ a.applicant.location }}</td>
        <td><a class="btn btn-default" href="{% url 'app_accept' pk=a.pk %}"><span class="btn btn-dark" style="background-color: green">Accept</span></a></td>
        <td><a class="btn btn-default" href="{% url 'app_remove' pk=a.pk %}"><span class="btn btn-dark" style="background-color: red">Reject</span></a></td>
      </tr>
    {% endfor %}
  </table>
  {% bootstrap_paginate page_obj range=6 previous_label="Previous" next_label="Next" show_first_last="true" %}
  {% endif %}
   </body>
        </div>
</div>
    </div>
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $('#txt_searchall').keyup(function(){
    var search = $(this).val();
    $('table tbody tr').hide();
    var len = $('table tbody tr:not(.notfound) td:contains("'+search+'")').length;
    if(len > 0){
      $('table tbody tr:not(.notfound) td:contains("'+search+'")').each(function(){
        $(this).closest('tr').show();
      });
    }else{
      $('.notfound').show();
    }
  });
  $('#txt_name').keyup(function(){
    var search = $(this).val();
    $('table tbody tr').hide();
    var len = $('table tbody tr:not(.notfound) td:nth-child(2):contains("'+search+'")').length;
    if(len > 0){
      $('table tbody tr:not(.notfound) td:contains("'+search+'")').each(function(){
         $(this).closest('tr').show();
      });
    }else{
      $('.notfound').show();
    }
  });
});
$.expr[":"].contains = $.expr.createPseudo(function(arg) {
   return function( elem ) {
     return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
   };
});
</script>
{% endblock %}
